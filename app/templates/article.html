{% extends "base.html" %}
{% block content %}
<div class="card">
    {% if user and article.author and user.id == article.author.id %}
    <div class="article-actions-top">
        <a href="/article/{{ article.id }}/edit" class="action-link edit">âœï¸ ç¼–è¾‘</a>
        <span class="action-separator">|</span>
        <a href="#" onclick="deleteArticle({{ article.id }})" class="action-link delete">ğŸ—‘ï¸ åˆ é™¤</a>
    </div>
    {% endif %}
    
    <h1>{{ article.title }}</h1>
    
    <div class="article-content">
        {{ article.content }}
    </div>
    
    <div class="article-meta right">
        {{ article.author.username if article.author else 'åŒ¿å' }} â€¢ {{ article.created_at.strftime('%Y-%m-%d %H:%M') if article.created_at else '' }}
    </div>
</div>

<script>
function deleteArticle(articleId) {
    if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ–‡ç« å—ï¼Ÿ')) {
        fetch(`/article/${articleId}/delete`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
        }).then(response => {
            if (response.ok) {
                window.location.href = '/';
            } else {
                alert('åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•');
            }
        }).catch(error => {
            console.error('Error:', error);
            alert('åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•');
        });
    }
}
</script>
{% endblock %}